import { Entry } from "$db/resolver.ts";
import { WeaponItem } from "$collections/items/collection.ts";
import { cost, dice, dmg, ref, source } from "$helpers";

const Range = {
  MELEE: { kind: "melee", normal: 5 },
  REACH: { kind: "melee", normal: 10 },
} as const;

export const weapons: Entry<WeaponItem>[] = [
  {
    id: "club",
    name: "Club",
    cost: cost("1 sp"),
    weight: 2,
    kind: "weapon",
    category: "simple",
    range: Range.MELEE,
    damage: dmg("1d4", "bludgeoning"),
    properties: [{ kind: "light" }],
    mastery: ref("weaponMasteries", "slow"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "dagger",
    name: "Dagger",
    cost: cost("2 gp"),
    weight: 1,
    kind: "weapon",
    category: "simple",
    range: Range.MELEE,
    damage: dmg("1d4", "piercing"),
    properties: [
      { kind: "light" },
      { kind: "finesse" },
      {
        kind: "thrown",
        thrownRange: { normal: 20, long: 60 },
      },
    ],
    mastery: ref("weaponMasteries", "nick"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "greatclub",
    name: "Greatclub",
    cost: cost("2 sp"),
    weight: 10,
    kind: "weapon",
    category: "simple",
    range: Range.MELEE,
    damage: dmg("1d8", "bludgeoning"),
    properties: [{ kind: "twoHanded", unlessMounted: false }],
    mastery: ref("weaponMasteries", "push"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "handaxe",
    name: "Handaxe",
    cost: cost("5 gp"),
    weight: 2,
    kind: "weapon",
    category: "simple",
    range: Range.MELEE,
    damage: dmg("1d6", "slashing"),
    properties: [
      {
        kind: "thrown",
        thrownRange: { normal: 20, long: 60 },
      },
    ],
    mastery: ref("weaponMasteries", "vex"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "javelin",
    name: "Javelin",
    cost: cost("5 sp"),
    weight: 2,
    kind: "weapon",
    category: "simple",
    range: Range.MELEE,
    damage: dmg("1d6", "piercing"),
    properties: [
      {
        kind: "thrown",
        thrownRange: { normal: 30, long: 120 },
      },
    ],
    mastery: ref("weaponMasteries", "slow"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "lightHammer",
    name: "Light hammer",
    cost: cost("2 gp"),
    weight: 2,
    kind: "weapon",
    category: "simple",
    range: Range.MELEE,
    damage: dmg("1d4", "bludgeoning"),
    properties: [
      { kind: "light" },
      {
        kind: "thrown",
        thrownRange: { normal: 20, long: 60 },
      },
    ],
    mastery: ref("weaponMasteries", "nick"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "mace",
    name: "Mace",
    cost: cost("5 gp"),
    weight: 4,
    kind: "weapon",
    category: "simple",
    range: Range.MELEE,
    damage: dmg("1d6", "bludgeoning"),
    properties: [],
    mastery: ref("weaponMasteries", "sap"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "quarterstaff",
    name: "Quarterstaff",
    cost: cost("2 sp"),
    weight: 4,
    kind: "weapon",
    category: "simple",
    range: Range.MELEE,
    damage: dmg("1d6", "bludgeoning"),
    properties: [
      {
        kind: "versatile",
        twoHandedDamage: "1d8",
      },
    ],
    mastery: ref("weaponMasteries", "topple"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "sickle",
    name: "Sickle",
    cost: cost("1 gp"),
    weight: 2,
    kind: "weapon",
    category: "simple",
    range: Range.MELEE,
    damage: dmg("1d4", "slashing"),
    properties: [
      { kind: "light" },
    ],
    mastery: ref("weaponMasteries", "nick"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "spear",
    name: "Spear",
    cost: cost("1 gp"),
    weight: 4,
    kind: "weapon",
    category: "simple",
    range: Range.MELEE,
    damage: dmg("1d6", "piercing"),
    properties: [
      {
        kind: "versatile",
        twoHandedDamage: "1d8",
      },
      {
        kind: "thrown",
        thrownRange: { normal: 20, long: 60 },
      },
    ],
    mastery: ref("weaponMasteries", "sap"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "dart",
    name: "Dart",
    cost: cost("5 cp"),
    weight: 0.25,
    kind: "weapon",
    category: "simple",
    range: { kind: "ranged", normal: 20, long: 60 },
    damage: dmg("1d4", "piercing"),
    properties: [
      { kind: "finesse" },
      {
        kind: "thrown",
        thrownRange: { normal: 20, long: 60 },
      },
    ],
    mastery: ref("weaponMasteries", "slow"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "lightCrossbow",
    name: "Light crossbow",
    cost: cost("25 gp"),
    weight: 5,
    kind: "weapon",
    category: "simple",
    range: { kind: "ranged", normal: 80, long: 320 },
    damage: dmg("1d8", "piercing"),
    properties: [
      { kind: "ammunition", ammunition: "Bolt" },
      { kind: "loading" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "vex"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "shortbow",
    name: "Shortbow",
    cost: cost("25 gp"),
    weight: 2,
    kind: "weapon",
    category: "simple",
    range: { kind: "ranged", normal: 80, long: 320 },
    damage: dmg("1d6", "piercing"),
    properties: [
      { kind: "ammunition", ammunition: "Arrow" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "vex"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "sling",
    name: "Sling",
    cost: cost("1 sp"),
    weight: 0,
    kind: "weapon",
    category: "simple",
    range: { kind: "ranged", normal: 30, long: 120 },
    damage: dmg("1d4", "bludgeoning"),
    properties: [
      { kind: "ammunition", ammunition: "Bullet" },
    ],
    mastery: ref("weaponMasteries", "slow"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "battleaxe",
    name: "Battleaxe",
    cost: cost("10 gp"),
    weight: 4,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d8", "slashing"),
    properties: [
      {
        kind: "versatile",
        twoHandedDamage: dice("1d10"),
      },
    ],
    mastery: ref("weaponMasteries", "topple"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "flail",
    name: "Flail",
    cost: cost("10 gp"),
    weight: 2,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d8", "bludgeoning"),
    properties: [],
    mastery: ref("weaponMasteries", "sap"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "glaive",
    name: "Glaive",
    cost: cost("20 gp"),
    weight: 6,
    kind: "weapon",
    category: "martial",
    range: Range.REACH,
    damage: dmg("1d10", "slashing"),
    properties: [
      { kind: "heavy" },
      { kind: "reach" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "graze"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "greataxe",
    name: "Greataxe",
    cost: cost("30 gp"),
    weight: 7,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d12", "slashing"),
    properties: [
      { kind: "heavy" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "cleave"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "greatsword",
    name: "Greatsword",
    cost: cost("50 gp"),
    weight: 6,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("2d6", "slashing"),
    properties: [
      { kind: "heavy" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "graze"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "halberd",
    name: "Halberd",
    cost: cost("20 gp"),
    weight: 6,
    kind: "weapon",
    category: "martial",
    range: Range.REACH,
    damage: dmg("1d10", "slashing"),
    properties: [
      { kind: "heavy" },
      { kind: "reach" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "cleave"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "lance",
    name: "Lance",
    cost: cost("10 gp"),
    weight: 6,
    kind: "weapon",
    category: "martial",
    range: Range.REACH,
    damage: dmg("1d10", "piercing"),
    properties: [
      { kind: "heavy" },
      { kind: "reach" },
      { kind: "twoHanded", unlessMounted: true },
    ],
    mastery: ref("weaponMasteries", "topple"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "longsword",
    name: "Longsword",
    cost: cost("15 gp"),
    weight: 3,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d8", "slashing"),
    properties: [
      {
        kind: "versatile",
        twoHandedDamage: dice("1d10"),
      },
    ],
    mastery: ref("weaponMasteries", "sap"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "maul",
    name: "Maul",
    cost: cost("10 gp"),
    weight: 10,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("2d6", "bludgeoning"),
    properties: [
      { kind: "heavy" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "topple"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "morningstar",
    name: "Morningstar",
    cost: cost("15 gp"),
    weight: 4,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d8", "piercing"),
    properties: [],
    mastery: ref("weaponMasteries", "sap"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "pike",
    name: "Pike",
    cost: cost("5 gp"),
    weight: 18,
    kind: "weapon",
    category: "martial",
    range: Range.REACH,
    damage: dmg("1d10", "piercing"),
    properties: [
      { kind: "heavy" },
      { kind: "reach" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "push"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "rapier",
    name: "Rapier",
    cost: cost("25 gp"),
    weight: 2,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d8", "piercing"),
    properties: [
      { kind: "finesse" },
    ],
    mastery: ref("weaponMasteries", "vex"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "scimitar",
    name: "Scimitar",
    cost: cost("25 gp"),
    weight: 3,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d6", "slashing"),
    properties: [
      { kind: "finesse" },
    ],
    mastery: ref("weaponMasteries", "nick"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "shortsword",
    name: "Shortsword",
    cost: cost("10 gp"),
    weight: 4,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d6", "slashing"),
    properties: [
      { kind: "finesse" },
      { kind: "light" },
    ],
    mastery: ref("weaponMasteries", "vex"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "trident",
    name: "Trident",
    cost: cost("5 gp"),
    weight: 4,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d8", "piercing"),
    properties: [
      { kind: "thrown", thrownRange: { normal: 20, long: 60 } },
      { kind: "versatile", twoHandedDamage: dice("1d10") },
    ],
    mastery: ref("weaponMasteries", "topple"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "warPick",
    name: "War Pick",
    cost: cost("5 gp"),
    weight: 2,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d8", "piercing"),
    properties: [
      { kind: "versatile", twoHandedDamage: dice("1d10") },
    ],
    mastery: ref("weaponMasteries", "sap"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "warhammer",
    name: "Warhammer",
    cost: cost("15 gp"),
    weight: 54,
    kind: "weapon",
    category: "martial",
    range: Range.MELEE,
    damage: dmg("1d8", "bludgeoning"),
    properties: [
      { kind: "versatile", twoHandedDamage: dice("1d10") },
    ],
    mastery: ref("weaponMasteries", "push"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "whip",
    name: "Whip",
    cost: cost("2 gp"),
    weight: 3,
    kind: "weapon",
    category: "martial",
    range: Range.REACH,
    damage: dmg("1d4", "slashing"),
    properties: [
      { kind: "finesse" },
      { kind: "reach" },
    ],
    mastery: ref("weaponMasteries", "slow"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "blowgun",
    name: "Blowgun",
    cost: cost("10 gp"),
    weight: 1,
    kind: "weapon",
    category: "martial",
    range: { kind: "ranged", normal: 25, long: 100 },
    damage: dmg("1", "piercing"),
    properties: [
      { kind: "ammunition", ammunition: "Needle" },
      { kind: "loading" },
    ],
    mastery: ref("weaponMasteries", "vex"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "handCrossbow",
    name: "Hand Crossbow",
    cost: cost("75 gp"),
    weight: 3,
    kind: "weapon",
    category: "martial",
    range: { kind: "ranged", normal: 30, long: 120 },
    damage: dmg("1d6", "piercing"),
    properties: [
      { kind: "ammunition", ammunition: "Bolt" },
      { kind: "light" },
      { kind: "loading" },
    ],
    mastery: ref("weaponMasteries", "vex"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "heavyCrossbow",
    name: "Heavy Crossbow",
    cost: cost("50 gp"),
    weight: 18,
    kind: "weapon",
    category: "martial",
    range: { kind: "ranged", normal: 100, long: 400 },
    damage: dmg("1d10", "piercing"),
    properties: [
      { kind: "ammunition", ammunition: "Bolt" },
      { kind: "heavy" },
      { kind: "loading" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "push"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "longbow",
    name: "Longbow",
    cost: cost("50 gp"),
    weight: 2,
    kind: "weapon",
    category: "martial",
    range: { kind: "ranged", normal: 150, long: 600 },
    damage: dmg("1d8", "piercing"),
    properties: [
      { kind: "ammunition", ammunition: "Arrow" },
      { kind: "heavy" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "slow"),
    tags: [],
    source: source("PHB2024", 215),
  },
  {
    id: "musket",
    name: "Musket",
    cost: cost("500 gp"),
    weight: 10,
    kind: "weapon",
    category: "martial",
    range: { kind: "ranged", normal: 40, long: 120 },
    damage: dmg("1d12", "piercing"),
    properties: [
      { kind: "ammunition", ammunition: "Firearm Bullet" },
      { kind: "loading" },
      { kind: "twoHanded", unlessMounted: false },
    ],
    mastery: ref("weaponMasteries", "slow"),
    tags: ["firearm"],
    source: source("PHB2024", 215),
  },
  {
    id: "pistol",
    name: "Pistol",
    cost: cost("250 gp"),
    weight: 3,
    kind: "weapon",
    category: "martial",
    range: { kind: "ranged", normal: 30, long: 90 },
    damage: dmg("1d10", "piercing"),
    properties: [
      { kind: "ammunition", ammunition: "Firearm Bullet" },
      { kind: "loading" },
    ],
    mastery: ref("weaponMasteries", "vex"),
    tags: ["firearm"],
    source: source("PHB2024", 215),
  },
];
